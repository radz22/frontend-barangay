import{r as x,j as e}from"./index-DZNekYFt.js";import{z as r,u as is,t as ds,a as ns}from"./zod-BiJ5s81f.js";import{C as cs}from"./cencus-hook-BPi_aC9_.js";import{a as ms}from"./authHook-BamDgnJx.js";import{n as w,d as Ve,T as Oe,m as us,r as hs,a as xs,b as bs}from"./resizeResults-GGqK0wwp.js";import"./sweet-alert-Dun-8MXZ.js";const ps=r.object({_id:r.string().optional(),dateofcencus:r.string(),areaofcencusstreet:r.string(),firstname:r.string().min(1,"First Name is Required"),middlename:r.string().min(1,"Middle Name is Required"),lastname:r.string().min(1,"Last Name is Required"),birthday:r.string().min(1,"Birthday is Required"),age:r.number().min(1,"Age is Required"),gender:r.enum(["female","male"],{required_error:"Gender is Required"}),civilstatus:r.enum(["single","married","widowed","seperated"],{required_error:"Civil Status is Required"}),currentschoolenrollment:r.enum(["yes","no"],{required_error:"Current School Enrollment is Required"}),educationalattainment:r.enum(["no formal education","elementary undergraduate","elementary graduate","high school undergraduate","high school graduate","senior high school undergraduate","senior high school graduate - STEM","senior high school graduate - HUMSS","senior high school graduate - TVL","college undergraduate","college graduate","master's degree","doctorate degree","TESDA-certified courses"],{required_error:"Educational Attainment is Required"}),employmentstatus:r.enum(["employed","selfemployed","unemployed","student","retired"],{required_error:"Employment Status is Required"}),occupation:r.string().min(1,"Occupation is Required"),housenumber:r.number().min(1,"House Number Required"),streetname:r.string().min(1,"Street Name Required"),barangay:r.string().min(1,"Barangay is Required"),city:r.string().min(1,"City is Required"),province:r.string().min(1,"Province is Required"),housetype:r.enum(["owner","renter","sharer","informal","settler"],{required_error:"House Type Enrollment is Required"}),healthstatus:r.enum(["good","fair","poor"],{required_error:"Health Status Enrollment is Required"}),disabilitystatus:r.enum(["yes","no"],{required_error:"Disability Status is Required"}),disabilitytype:r.string().optional(),existinghealthcondition:r.string().min(1,"Existing Health Condition is Required"),fullyimmunized:r.enum(["yes","no"],{required_error:"Fully Immunized is Required"}),covid19vaccination:r.enum(["yes","no"],{required_error:"Covid-19  Vaccination is Required"}),housingtype:r.enum(["concrete","semi concreate","wooden"],{required_error:"Housing Type is Required"}),yearofconstructed:r.string().optional(),residentlived:r.enum(["yes","no"],{required_error:"Resident Lived Required Field"}),barangayresidence:r.string().optional(),cityresidence:r.string().optional(),municipalityresidence:r.string().optional(),provinceresidence:r.string().optional(),reasonformoving:r.string().optional(),mobilenumber:r.number().min(1,"Mobile Number is Required"),emergencycontactname:r.string().min(1,"Emergency Contact Name is Required"),emergencycontactnumber:r.number().min(1,"Emergency Contact Number is Required"),relationshiptoemergencycontact:r.number().min(1,"Relation to Emergency Contact is Required"),numberofhousemembers:r.number().min(1,"Number of House Members is Required"),householdMembers:r.array(r.object({relationship:r.enum(["spouse","child","parent","sibling","grandparent"]),firstname:r.string().min(1,"First Name is Required"),middlename:r.string().min(1,"Middle Name is Required"),lastname:r.string().min(1,"Last Name is Required"),birthday:r.string().min(1,"Birthday is Required"),age:r.number().min(1,"Birthday is Required"),gender:r.enum(["female","male"],{required_error:"Gender is Required"}),civilstatus:r.enum(["single","married","widowed","seperated"],{required_error:"Civil Status is Required"}),currentschoolenrollment:r.enum(["yes","no"],{required_error:"Current School Enrollment is Required"}),educationalattainment:r.enum(["no formal education","elementary undergraduate","elementary graduate","high school undergraduate","high school graduate","senior high school undergraduate","senior high school graduate - STEM","senior high school graduate - HUMSS","senior high school graduate - TVL","college undergraduate","college graduate","master's degree","doctorate degree","TESDA-certified courses"],{required_error:"Educational Attainment is Required"}),employmentstatus:r.enum(["employed","selfemployed","unemployed","student","retired"],{required_error:"Employment Status is Required"}),occupation:r.string().min(1,"occupation is Required"),healthstatus:r.enum(["good","fair","poor"],{required_error:"Health Status Enrollment is Required"}),disabilitystatus:r.enum(["yes","no"],{required_error:"Disability Status is Required"}),disabilitytype:r.string().optional(),existinghealthcondition:r.string().min(1,"Existing Health  is Required"),fullyimmunized:r.enum(["yes","no"],{required_error:"Fully Immunized is Required"}),covid19vaccination:r.enum(["yes","no"],{required_error:"Covid-19  Vaccination is Required"})})).optional(),archived:r.boolean().default(!1).optional(),descriptor:r.array(r.number()).optional()}).superRefine((d,n)=>{d.residentlived==="yes"&&[{key:"barangayresidence",message:"Barangay Residence Required"},{key:"cityresidence",message:"City Required"},{key:"municipalityresidence",message:"Municipality Required"},{key:"provinceresidence",message:"Province Required"},{key:"reasonformoving",message:"Reason for Moving Required"}].forEach(({key:o,message:h})=>{d[o]||n.addIssue({code:r.ZodIssueCode.custom,message:h,path:[o]})}),d.disabilitystatus==="yes"&&!d.disabilitytype&&n.addIssue({code:r.ZodIssueCode.custom,message:"Disability Status is required",path:["disabilitytype"]}),d.householdMembers&&d.householdMembers.forEach((u,o)=>{u.disabilitystatus==="yes"&&!u.disabilitytype&&n.addIssue({code:r.ZodIssueCode.custom,message:"Disability Type is required",path:["householdMembers",o,"disabilitytype"]})})}),Ie=d=>{const n=new Date(d),u=new Date;let o=u.getFullYear()-n.getFullYear();const h=u.getMonth()-n.getMonth();return(h<0||h===0&&u.getDate()<n.getDate())&&o--,o},gs=()=>{const{handleCreateCencus:d,createCencusMutation:n}=cs(),{handleLogout:u}=ms(),o=x.useRef(null),h=x.useRef(null),[Pe,Ye]=x.useState(!1),[M,S]=x.useState(!1),[Be,y]=x.useState(""),{register:a,control:We,handleSubmit:Ze,setValue:g,watch:b,getValues:Je,formState:{errors:s}}=is({resolver:ds(ps),defaultValues:{householdMembers:[]}}),{fields:Ke,append:Qe,remove:Xe}=ns({control:We,name:"householdMembers"}),v=b("birthday"),es=b("disabilitystatus"),ss=b("residentlived"),ts=b("dateofcencus"),rs=b("areaofcencusstreet"),N=b("householdMembers");x.useEffect(()=>{if(v){const l=Ie(v);g("age",l,{shouldValidate:!0})}},[v,g]),x.useEffect(()=>{N&&N.forEach((l,t)=>{if(l.birthday){const i=Ie(l.birthday);g(`householdMembers.${t}.age`,i,{shouldValidate:!0})}})},[JSON.stringify(N),g]),x.useEffect(()=>{R()},[]);const as=()=>{ts&&rs&&Ye(!0)},R=async()=>{const l="/models";await Promise.all([w.tinyFaceDetector.loadFromUri(l),w.faceLandmark68Net.loadFromUri(l),w.faceRecognitionNet.loadFromUri(l)])};x.useEffect(()=>{R()},[]);const ls=async()=>{const l=await navigator.mediaDevices.getUserMedia({video:{}});o.current&&(o.current.srcObject=l,S(!0),y("Open Camera")),setTimeout(()=>C(),1e3)},q=()=>{var l,t,i;(l=o.current)!=null&&l.srcObject&&o.current.srcObject.getTracks().forEach(c=>c.stop()),S(!1),y("Close Camera"),(i=(t=h.current)==null?void 0:t.getContext("2d"))==null||i.clearRect(0,0,640,480)},C=async()=>{var c;if(!o.current||!h.current)return;const l=o.current,t=await Ve(l,new Oe).withFaceLandmarks().withFaceDescriptor(),i=h.current,p={width:l.width,height:l.height};if(us(i,p),(c=i.getContext("2d"))==null||c.clearRect(0,0,i.width,i.height),t){const m=hs(t,p);xs(i,m),bs(i,m);const j=m.landmarks.getLeftEye(),f=m.landmarks.getRightEye();Math.abs(j[0].x-f[3].x)>=40?y("✅ Angle OK"):y("❌ Face the camera directly.")}else y("❌ No face detected.");M&&setTimeout(()=>C(),300)},os=async()=>{if(o.current)try{const l=await Ve(o.current,new Oe).withFaceLandmarks().withFaceDescriptor();if(!l)return;const t=l.landmarks.getLeftEye(),i=l.landmarks.getRightEye();if(Math.abs(t[0].x-i[3].x)<40){alert("Face the camera directly.");return}const c=Array.from(l.descriptor);g("descriptor",c,{shouldValidate:!0}),g("descriptor",c,{shouldValidate:!0});const m=Je();await d(m),console.log(m),q()}catch(l){console.error("Submission error:",l),alert("Error submitting form. Please try again.")}};return e.jsxs("div",{className:"w-full relative",children:[e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white shadow-md rounded-lg mt-10",children:[e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Cencus"}),e.jsx("input",{...a("dateofcencus"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",type:"date"}),s.dateofcencus&&e.jsx("p",{className:"text-red-500 text-sm",children:s.dateofcencus.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Area of Cencus Street"}),e.jsx("input",{...a("areaofcencusstreet"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.areaofcencusstreet&&e.jsx("p",{className:"text-red-500 text-sm",children:s.areaofcencusstreet.message})]}),e.jsx("div",{className:"mt-5 mb-5",children:e.jsx("button",{onClick:as,className:"px-3 py-3 bg-[#7F265B] rounded-lg flex items-center justify-center  cursor-pointe text-white font-semibold",children:"Conduct Cencus"})})]}),Pe&&e.jsxs("form",{onSubmit:Ze(os),className:"space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Census Form"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{...a("firstname"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.firstname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.firstname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Middle Name"}),e.jsx("input",{...a("middlename"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.middlename&&e.jsx("p",{className:"text-red-500 text-sm",children:s.middlename.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{...a("lastname"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.lastname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.lastname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Birth Day"}),e.jsx("input",{type:"date",...a("birthday"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.birthday&&e.jsx("p",{className:"text-red-500 text-sm",children:s.birthday.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Age"}),e.jsx("input",{type:"number",...a("age",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",readOnly:!0}),s.age&&e.jsx("p",{className:"text-red-500 text-sm",children:s.age.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{...a("gender"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]}),s.gender&&e.jsx("p",{children:s.gender.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Civil Status"}),e.jsxs("select",{...a("civilstatus"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"widowed",children:"Widowed"}),e.jsx("option",{value:"seperated",children:"seperated"})]}),s.civilstatus&&e.jsx("p",{children:s.civilstatus.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current School Enrollment?"}),e.jsxs("select",{...a("currentschoolenrollment"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]}),s.currentschoolenrollment&&e.jsx("p",{children:s.currentschoolenrollment.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Educational Attainment"}),e.jsxs("select",{...a("educationalattainment"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"no formal education",children:"No Formal Education"}),e.jsx("option",{value:"elementary undergraduate",children:"Elementary Undergraduate"}),e.jsx("option",{value:"elementary graduate",children:"Elementary Graduate"}),e.jsx("option",{value:"high school undergraduate",children:"High School Undergraduate"}),e.jsx("option",{value:"high school graduate",children:"High School Graduate"}),e.jsx("option",{value:"senior high school undergraduate",children:"Senior High School Undergraduate"}),e.jsx("option",{value:"senior high school graduate - STEM",children:"Senior High School Graduate - STEM"}),e.jsx("option",{value:"senior high school graduate - HUMSS",children:"Senior High School Graduate - HUMSS"}),e.jsx("option",{value:"senior high school graduate - TVL",children:"Senior High School Graduate - TVL"}),e.jsx("option",{value:"college undergraduate",children:"College Undergraduate"}),e.jsx("option",{value:"college graduate",children:"College Graduate (Specify Degree)"}),e.jsx("option",{value:"master's degree",children:"Master's Degree (e.g., MA, MS)"}),e.jsx("option",{value:"doctorate degree",children:"Doctorate Degree (e.g., PhD, EdD)"}),e.jsx("option",{value:"TESDA-certified courses",children:"TESDA-Certified Courses (e.g., Welding, IT Support)"})]}),s.educationalattainment&&e.jsx("p",{children:s.educationalattainment.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employment Status"}),e.jsxs("select",{...a("employmentstatus"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"employed",children:"Employed"}),e.jsx("option",{value:"selfemployed",children:"Self Employed"}),e.jsx("option",{value:"unemployed",children:"Unemployed"}),e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"retired",children:"Retired"})]}),s.employmentstatus&&e.jsx("p",{children:s.employmentstatus.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Occupation"}),e.jsx("input",{...a("occupation"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.occupation&&e.jsx("p",{className:"text-red-500 text-sm",children:s.occupation.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House Number"}),e.jsx("input",{type:"number",...a("housenumber",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.housenumber&&e.jsx("p",{className:"text-red-500 text-sm",children:s.housenumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Street Name"}),e.jsx("input",{...a("streetname"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.streetname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.streetname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Barangay"}),e.jsx("input",{...a("barangay"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.barangay&&e.jsx("p",{className:"text-red-500 text-sm",children:s.barangay.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{...a("city"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.city&&e.jsx("p",{className:"text-red-500 text-sm",children:s.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),e.jsx("input",{...a("province"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.province&&e.jsx("p",{className:"text-red-500 text-sm",children:s.province.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House Type"}),e.jsxs("select",{...a("housetype"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"renter",children:"Renter"}),e.jsx("option",{value:"sharer",children:"Sharer"}),e.jsx("option",{value:"informal",children:"Informal"}),e.jsx("option",{value:"settler",children:"Settler"})]}),s.housetype&&e.jsx("p",{children:s.housetype.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Healthy Status"}),e.jsxs("select",{...a("healthstatus"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"})]}),s.healthstatus&&e.jsx("p",{children:s.healthstatus.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Disability Status"}),e.jsxs("select",{...a("disabilitystatus"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]}),s.disabilitystatus&&e.jsx("p",{children:s.disabilitystatus.message})]}),e.jsx("div",{children:es==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Disability Type"}),e.jsx("input",{...a("disabilitytype"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Existing Health Condition"}),e.jsx("input",{...a("existinghealthcondition"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.existinghealthcondition&&e.jsx("p",{className:"text-red-500 text-sm",children:s.existinghealthcondition.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fully Immunized"}),e.jsxs("select",{...a("fullyimmunized"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]}),s.fullyimmunized&&e.jsx("p",{children:s.fullyimmunized.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Covid-19 Vaccination"}),e.jsxs("select",{...a("covid19vaccination"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]}),s.covid19vaccination&&e.jsx("p",{children:s.covid19vaccination.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Housing Type"}),e.jsxs("select",{...a("housingtype"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"concrete",children:"Concrete"}),e.jsx("option",{value:"semi concreate",children:"Semi Concreate"}),e.jsx("option",{value:"wooden",children:"Wooden"})]}),s.housingtype&&e.jsx("p",{children:s.housingtype.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year of Constructed"}),e.jsx("input",{...a("yearofconstructed"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Has the resident lived in other places in the past 5 years?"}),e.jsxs("select",{...a("residentlived"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]}),s.residentlived&&e.jsx("p",{children:s.residentlived.message})]}),e.jsx("div",{children:ss==="yes"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Barangay"}),e.jsx("input",{...a("barangayresidence"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.barangayresidence&&e.jsx("p",{className:"text-red-500 text-sm",children:s.barangayresidence.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{...a("cityresidence"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.cityresidence&&e.jsx("p",{className:"text-red-500 text-sm",children:s.cityresidence.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Municipality"}),e.jsx("input",{...a("municipalityresidence"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.municipalityresidence&&e.jsx("p",{className:"text-red-500 text-sm",children:s.municipalityresidence.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),e.jsx("input",{...a("provinceresidence"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.provinceresidence&&e.jsx("p",{className:"text-red-500 text-sm",children:s.provinceresidence.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason for Moving"}),e.jsx("input",{...a("reasonformoving"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.reasonformoving&&e.jsx("p",{className:"text-red-500 text-sm",children:s.reasonformoving.message})]})]})}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 mt-5",children:[" ","Contact and Emergency Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),e.jsx("input",{type:"number",...a("mobilenumber",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.mobilenumber&&e.jsx("p",{className:"text-red-500 text-sm",children:s.mobilenumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Name"}),e.jsx("input",{...a("emergencycontactname"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.emergencycontactname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.emergencycontactname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Number"}),e.jsx("input",{type:"number",...a("emergencycontactnumber",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.emergencycontactname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.emergencycontactname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Relationship Contact Number"}),e.jsx("input",{type:"number",...a("relationshiptoemergencycontact",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.relationshiptoemergencycontact&&e.jsx("p",{className:"text-red-500 text-sm",children:s.relationshiptoemergencycontact.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number of household members"}),e.jsx("input",{type:"number",...a("numberofhousemembers",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.numberofhousemembers&&e.jsx("p",{className:"text-red-500 text-sm",children:s.numberofhousemembers.message})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Household Members"}),Ke.map((l,t)=>{var p,c,m,j,f,k,E,D,F,H,T,A,L,_,U,$,G,z,V,O,I,P,Y,B,W,Z,J,K,Q,X,ee,se,te,re,ae,le,oe,ie,de,ne,ce,me,ue,he,xe,be,pe,ge,ye,je,fe,ve,Ne,ke,we,Me,Se,Re,qe,Ce,Ee,De,Fe,He,Te,Ae,Le,_e,Ue,$e,Ge,ze;const i=b(`householdMembers.${t}.disabilitystatus`);return e.jsxs("div",{className:"mb-6 p-4 border rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Household Member ",t+1]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Relationship"}),e.jsxs("select",{...a(`householdMembers.${t}.relationship`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"spouse",children:"Spouse"}),e.jsx("option",{value:"child",children:"Child"}),e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"sibling",children:"Sibling"}),e.jsx("option",{value:"grandparent",children:"Grandparent"})]}),((c=(p=s.householdMembers)==null?void 0:p[t])==null?void 0:c.relationship)&&e.jsx("p",{className:"text-red-500 text-sm",children:(j=(m=s.householdMembers[t])==null?void 0:m.relationship)==null?void 0:j.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{...a(`householdMembers.${t}.firstname`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((k=(f=s.householdMembers)==null?void 0:f[t])==null?void 0:k.firstname)&&e.jsx("p",{className:"text-red-500 text-sm",children:(D=(E=s.householdMembers[t])==null?void 0:E.firstname)==null?void 0:D.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Middle Name"}),e.jsx("input",{...a(`householdMembers.${t}.middlename`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((H=(F=s.householdMembers)==null?void 0:F[t])==null?void 0:H.middlename)&&e.jsx("p",{className:"text-red-500 text-sm",children:(A=(T=s.householdMembers[t])==null?void 0:T.middlename)==null?void 0:A.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{...a(`householdMembers.${t}.lastname`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((_=(L=s.householdMembers)==null?void 0:L[t])==null?void 0:_.lastname)&&e.jsx("p",{className:"text-red-500 text-sm",children:($=(U=s.householdMembers[t])==null?void 0:U.lastname)==null?void 0:$.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Birthday"}),e.jsx("input",{type:"date",...a(`householdMembers.${t}.birthday`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((z=(G=s.householdMembers)==null?void 0:G[t])==null?void 0:z.birthday)&&e.jsx("p",{className:"text-red-500 text-sm",children:(O=(V=s.householdMembers[t])==null?void 0:V.birthday)==null?void 0:O.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Age"}),e.jsx("input",{type:"number",...a(`householdMembers.${t}.age`,{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",readOnly:!0}),((P=(I=s.householdMembers)==null?void 0:I[t])==null?void 0:P.age)&&e.jsx("p",{className:"text-red-500 text-sm",children:(B=(Y=s.householdMembers[t])==null?void 0:Y.age)==null?void 0:B.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{...a(`householdMembers.${t}.gender`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"male",children:"Male"})]}),((Z=(W=s.householdMembers)==null?void 0:W[t])==null?void 0:Z.gender)&&e.jsx("p",{className:"text-red-500 text-sm",children:(K=(J=s.householdMembers[t])==null?void 0:J.gender)==null?void 0:K.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Civil Status"}),e.jsxs("select",{...a(`householdMembers.${t}.civilstatus`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"widowed",children:"Widowed"}),e.jsx("option",{value:"seperated",children:"Seperated"})]}),((X=(Q=s.householdMembers)==null?void 0:Q[t])==null?void 0:X.civilstatus)&&e.jsx("p",{className:"text-red-500 text-sm",children:(se=(ee=s.householdMembers[t])==null?void 0:ee.civilstatus)==null?void 0:se.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current School Enrollment"}),e.jsxs("select",{...a(`householdMembers.${t}.currentschoolenrollment`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]}),((re=(te=s.householdMembers)==null?void 0:te[t])==null?void 0:re.currentschoolenrollment)&&e.jsx("p",{className:"text-red-500 text-sm",children:(le=(ae=s.householdMembers[t])==null?void 0:ae.currentschoolenrollment)==null?void 0:le.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Educational Attainment"}),e.jsxs("select",{...a(`householdMembers.${t}.educationalattainment`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"no formal education",children:"No Formal Education"}),e.jsx("option",{value:"elementary undergraduate",children:"Elementary Undergraduate"}),e.jsx("option",{value:"elementary graduate",children:"Elementary Graduate"}),e.jsx("option",{value:"high school undergraduate",children:"High School Undergraduate"}),e.jsx("option",{value:"high school graduate",children:"High School Graduate"}),e.jsx("option",{value:"senior high school undergraduate",children:"Senior High School Undergraduate"}),e.jsx("option",{value:"senior high school graduate - STEM",children:"Senior High School Graduate - STEM"}),e.jsx("option",{value:"senior high school graduate - HUMSS",children:"Senior High School Graduate - HUMSS"}),e.jsx("option",{value:"senior high school graduate - TVL",children:"Senior High School Graduate - TVL"}),e.jsx("option",{value:"college undergraduate",children:"College Undergraduate"}),e.jsx("option",{value:"college graduate",children:"College Graduate (Specify Degree)"}),e.jsx("option",{value:"master's degree",children:"Master's Degree (e.g., MA, MS)"}),e.jsx("option",{value:"doctorate degree",children:"Doctorate Degree (e.g., PhD, EdD)"}),e.jsx("option",{value:"TESDA-certified courses",children:"TESDA-Certified Courses (e.g., Welding, IT Support)"})]}),((ie=(oe=s.householdMembers)==null?void 0:oe[t])==null?void 0:ie.educationalattainment)&&e.jsx("p",{className:"text-red-500 text-sm",children:(ne=(de=s.householdMembers[t])==null?void 0:de.educationalattainment)==null?void 0:ne.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employment Status"}),e.jsxs("select",{...a(`householdMembers.${t}.employmentstatus`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"employed",children:"Employed"}),e.jsx("option",{value:"selfemployed",children:"Self Employed"}),e.jsx("option",{value:"unemployed",children:"Unemployed"}),e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"retired",children:"Retired"})]}),((me=(ce=s.householdMembers)==null?void 0:ce[t])==null?void 0:me.employmentstatus)&&e.jsx("p",{className:"text-red-500 text-sm",children:(he=(ue=s.householdMembers[t])==null?void 0:ue.employmentstatus)==null?void 0:he.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Occupation"}),e.jsx("input",{...a(`householdMembers.${t}.occupation`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((be=(xe=s.householdMembers)==null?void 0:xe[t])==null?void 0:be.occupation)&&e.jsx("p",{className:"text-red-500 text-sm",children:(ge=(pe=s.householdMembers[t])==null?void 0:pe.occupation)==null?void 0:ge.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Health Status"}),e.jsxs("select",{...a(`householdMembers.${t}.healthstatus`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"})]}),((je=(ye=s.householdMembers)==null?void 0:ye[t])==null?void 0:je.healthstatus)&&e.jsx("p",{className:"text-red-500 text-sm",children:(ve=(fe=s.householdMembers[t])==null?void 0:fe.healthstatus)==null?void 0:ve.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Disability Status"}),e.jsxs("select",{...a(`householdMembers.${t}.disabilitystatus`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]}),((ke=(Ne=s.householdMembers)==null?void 0:Ne[t])==null?void 0:ke.disabilitystatus)&&e.jsx("p",{className:"text-red-500 text-sm",children:(Me=(we=s.householdMembers[t])==null?void 0:we.disabilitystatus)==null?void 0:Me.message})]}),i=="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Disability type"}),e.jsx("input",{...a(`householdMembers.${t}.disabilitytype`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((Re=(Se=s.householdMembers)==null?void 0:Se[t])==null?void 0:Re.disabilitytype)&&e.jsx("p",{className:"text-red-500 text-sm",children:(Ce=(qe=s.householdMembers[t])==null?void 0:qe.disabilitytype)==null?void 0:Ce.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Existing Health Condition"}),e.jsx("input",{...a(`householdMembers.${t}.existinghealthcondition`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),((De=(Ee=s.householdMembers)==null?void 0:Ee[t])==null?void 0:De.existinghealthcondition)&&e.jsx("p",{className:"text-red-500 text-sm",children:(He=(Fe=s.householdMembers[t])==null?void 0:Fe.existinghealthcondition)==null?void 0:He.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fully Immunized"}),e.jsxs("select",{...a(`householdMembers.${t}.fullyimmunized`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]}),((Ae=(Te=s.householdMembers)==null?void 0:Te[t])==null?void 0:Ae.fullyimmunized)&&e.jsx("p",{className:"text-red-500 text-sm",children:(_e=(Le=s.householdMembers[t])==null?void 0:Le.fullyimmunized)==null?void 0:_e.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Covid 19 Vaccination"}),e.jsxs("select",{...a(`householdMembers.${t}.covid19vaccination`),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]}),(($e=(Ue=s.householdMembers)==null?void 0:Ue[t])==null?void 0:$e.covid19vaccination)&&e.jsx("p",{className:"text-red-500 text-sm",children:(ze=(Ge=s.householdMembers[t])==null?void 0:Ge.covid19vaccination)==null?void 0:ze.message})]}),e.jsx("button",{type:"button",onClick:()=>Xe(t),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-md",children:"Remove Member"})]},l.id)}),e.jsx("button",{type:"button",onClick:()=>Qe({relationship:"spouse",firstname:"",middlename:"",lastname:"",birthday:"",age:0,gender:"female",civilstatus:"single",currentschoolenrollment:"yes",educationalattainment:"high school graduate",employmentstatus:"employed",occupation:"",healthstatus:"good",disabilitystatus:"yes",existinghealthcondition:"",fullyimmunized:"yes",covid19vaccination:"yes"}),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md",children:"Add Household Member"})]}),e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Register New Face"}),e.jsx("div",{className:"flex justify-center gap-4",children:M?e.jsx("button",{onClick:q,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Close Camera"}):e.jsx("button",{onClick:ls,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Open Camera"})}),e.jsxs("div",{className:"relative w-full max-w-xl mx-auto aspect-video border rounded overflow-hidden",children:[e.jsx("video",{ref:o,width:"640",height:"480",autoPlay:!0,muted:!0,className:"absolute top-0 left-0 w-full h-full object-cover"}),e.jsx("canvas",{ref:h,width:"640",height:"480",className:"absolute top-0 left-0 w-full h-full"})]}),e.jsx("p",{className:"text-center font-medium text-gray-700",children:Be}),e.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600",disabled:n.isPending,children:n.isPending?"Loading":"Submit"})]})]}),e.jsx("div",{className:"absolute top-0 right-5",onClick:u,children:e.jsx("button",{className:"px-3 py-3 bg-[#7F265B] rounded-lg flex items-center justify-center  cursor-pointe text-white font-semibold",children:"Log out"})})]})},ws=()=>e.jsx(e.Fragment,{children:e.jsx(gs,{})});export{ws as Cencus};
