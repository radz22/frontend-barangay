import{j as e,r as m}from"./index-DZNekYFt.js";import{R as h,T as u,P as b,O as j,C as g,a as p,D as C}from"./delete-layout-u9vskXHh.js";import{z as l,u as S,t as M}from"./zod-BiJ5s81f.js";import{R as w}from"./resident-hook-DEZuxZrY.js";import"./sweet-alert-Dun-8MXZ.js";const R=l.object({_id:l.string().optional(),firstName:l.string().min(1,"First name is required"),lastName:l.string().min(1,"Last name is required"),middlename:l.string().optional(),dateofbirth:l.string().min(1,"Date of birth is required").refine(t=>!isNaN(Date.parse(t)),"Invalid date format"),gender:l.enum(["female","male"]),civilstatus:l.enum(["single","married","widowed","seperated"],{required_error:"Civil status is required"}),nationality:l.string().min(1,"Nationality is required"),mobilenumber:l.number().min(1,"Mobile number is required"),address:l.string().min(1,"Address is required"),streetname:l.string().min(1,"Street name is required"),province:l.string().min(1,"Province is required")}),B=({handleCreate:t,createResidentMutation:d,setOpen:n})=>{const{register:a,handleSubmit:o,formState:{errors:s}}=S({resolver:M(R)}),c=x=>{t(x),n()};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white shadow-md rounded-lg mt-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Resident Profiling Form"}),e.jsxs("form",{onSubmit:o(c),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{...a("firstName"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.firstName&&e.jsx("p",{className:"text-red-500 text-sm",children:s.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Middle Name"}),e.jsx("input",{...a("middlename"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{...a("lastName"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.lastName&&e.jsx("p",{className:"text-red-500 text-sm",children:s.lastName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("input",{...a("dateofbirth"),type:"date",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.dateofbirth&&e.jsx("p",{className:"text-red-500 text-sm",children:s.dateofbirth.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{...a("gender"),defaultValue:"",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]}),s.gender&&e.jsx("p",{className:"text-red-500",children:s.gender.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Civil Status"}),e.jsxs("select",{...a("civilstatus"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"widowed",children:"Widowed"}),e.jsx("option",{value:"seperated",children:"Seperated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nationality"}),e.jsx("input",{...a("nationality"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.nationality&&e.jsx("p",{className:"text-red-500 text-sm",children:s.nationality.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),e.jsx("input",{type:"number",...a("mobilenumber",{valueAsNumber:!0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.mobilenumber&&e.jsx("p",{className:"text-red-500 text-sm",children:s.mobilenumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{...a("address"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.address&&e.jsx("p",{className:"text-red-500 text-sm",children:s.address.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Street"}),e.jsx("input",{...a("streetname"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.streetname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.streetname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),e.jsx("input",{...a("province"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"}),s.province&&e.jsx("p",{className:"text-red-500 text-sm",children:s.province.message})]}),e.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600",disabled:d.isPending,children:d.isPending?"Loading...":"Submit"})]})]})},F=({data:t})=>t?e.jsx("div",{className:"mt-4 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"First Name:"})," ",t.firstName]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Middle Name:"})," ",t.middlename]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Last Name:"})," ",t.lastName]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",t.gender]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Birthday:"})," ",t.dateofbirth]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Civil Status:"})," ",t.civilstatus]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Nationality:"})," ",t.nationality]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",t.mobilenumber]})]})]})]})}):e.jsx("div",{className:"p-4 text-center text-gray-600",children:"No census data available."}),D=()=>{const[t,d]=m.useState(null),[n,a]=m.useState(null),[o,s]=m.useState(""),{residentData:c,handleDelete:x,deleteResidentDataByIdMutation:v}=w(),k=[...(c==null?void 0:c.data)||[]].sort((r,i)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime()).filter(r=>{var N,f,y;if(!o)return!0;const i=o.toLowerCase(),L=`${r.firstName||""} ${r.middlename||""} ${r.lastName||""}`.toLowerCase();return((N=r.firstName)==null?void 0:N.toLowerCase().includes(i))||((f=r.middlename)==null?void 0:f.toLowerCase().includes(i))||((y=r.lastName)==null?void 0:y.toLowerCase().includes(i))||L.includes(i)});return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("div",{className:"mb-4 flex  justify-end items-end ",children:e.jsx("input",{type:"text",placeholder:"Search by (first, middle, last, or full name)",className:"w-[300px] p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:r=>s(r.target.value)})}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-lg rounded-lg border border-gray-300",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#7F265B] text-white text-left border-b border-gray-300",children:[e.jsx("th",{className:"p-3 border border-gray-300",children:"First Name"}),e.jsx("th",{className:"p-3 border border-gray-300",children:"Middle Name"}),e.jsx("th",{className:"p-3 border border-gray-300",children:"Last Name"}),e.jsx("th",{className:"p-3 border border-gray-300",children:"Birth Date"}),e.jsx("th",{className:"p-3 border border-gray-300",children:"Gender"}),e.jsx("th",{className:"p-3 border border-gray-300 text-center",children:"Action"})]})}),e.jsx("tbody",{children:k.map((r,i)=>e.jsxs("tr",{className:"border-b border-gray-300 odd:bg-gray-100 even:bg-white hover:bg-gray-200 transition-all",children:[e.jsx("td",{className:"p-3 border border-gray-300",children:r.firstName}),e.jsx("td",{className:"p-3 border border-gray-300",children:r.middlename||"-"}),e.jsx("td",{className:"p-3 border border-gray-300",children:r.lastName}),e.jsx("td",{className:"p-3 border border-gray-300",children:r.dateofbirth}),e.jsx("td",{className:"p-3 border border-gray-300",children:r.gender}),e.jsxs("td",{className:"p-3 border border-gray-300 text-center",children:[e.jsxs(h,{children:[e.jsx(u,{children:e.jsx("button",{className:"mr-2 p-2 text-blue-600 hover:text-blue-800",onClick:()=>a(r),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M20.188 10.934c.388.472.582.707.582 1.066s-.194.594-.582 1.066C18.768 14.79 15.636 18 12 18s-6.768-3.21-8.188-4.934c-.388-.472-.582-.707-.582-1.066s.194-.594.582-1.066C5.232 9.21 8.364 6 12 6s6.768 3.21 8.188 4.934Z"})]})})}),e.jsxs(b,{children:[e.jsx(j,{className:"fixed inset-0 bg-black/50"}),e.jsxs(g,{className:"fixed top-1/2 left-1/2 bg-white p-6 rounded-lg shadow-lg transform -translate-x-1/2 -translate-y-1/2 w-auto h-auto",children:[e.jsx(F,{data:n}),e.jsx("div",{className:"absolute top-[-20px] right-[-20px]",children:e.jsx(p,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 bg-[#7F265B] rounded-full flex items-center justify-center  cursor-pointer",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#fff",d:"M16.95 8.464a1 1 0 0 0-1.414-1.414L12 10.586L8.464 7.05A1 1 0 1 0 7.05 8.464L10.586 12L7.05 15.536a1 1 0 1 0 1.414 1.414L12 13.414l3.536 3.536a1 1 0 1 0 1.414-1.414L13.414 12z"})})})})})]})]})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx("button",{className:"p-2 text-red-600 hover:text-red-800",onClick:()=>d((r==null?void 0:r._id)??null),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"m19 6-.867 12.142A2 2 0 0 1 16.137 20H7.863a2 2 0 0 1-1.996-1.858L5 6"}),e.jsx("path",{d:"M10 11v5"}),e.jsx("path",{d:"M14 11v5"})]})})}),e.jsxs(b,{children:[e.jsx(j,{className:"fixed inset-0 bg-black/50"}),e.jsxs(g,{className:"fixed top-1/2 left-1/2 bg-white p-6 rounded-lg shadow-lg transform -translate-x-1/2 -translate-y-1/2 w-auto h-auto",children:[e.jsx(C,{id:t,handleDelete:x,deleteMutation:v}),e.jsx("div",{className:"absolute top-[-20px] right-[-20px]",children:e.jsx(p,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 bg-[#7F265B] rounded-full flex items-center justify-center  cursor-pointer",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#fff",d:"M16.95 8.464a1 1 0 0 0-1.414-1.414L12 10.586L8.464 7.05A1 1 0 1 0 7.05 8.464L10.586 12L7.05 15.536a1 1 0 1 0 1.414 1.414L12 13.414l3.536 3.536a1 1 0 1 0 1.414-1.414L13.414 12z"})})})})})]})]})]})]})]},i))})]})})]})},q=()=>{const[t,d]=m.useState(!1),{handleCreateResident:n,createResidentMutation:a}=w();return e.jsxs("div",{className:"w-full h-screens",children:[e.jsx("div",{className:"w-full flex items-end justify-end px-4",children:e.jsxs(h,{open:t,onOpenChange:d,children:[e.jsx(u,{children:e.jsx("button",{className:"w-auto py-3 px-3 bg-[#7F265B] text-white rounded-lg  font-semibold ",onClick:()=>d(!0),children:"Create Resident"})}),e.jsxs(b,{children:[e.jsx(j,{className:"fixed inset-0 bg-black/50"}),e.jsxs(g,{className:"fixed top-1/2 left-1/2 bg-white p-6 rounded-lg shadow-lg transform -translate-x-1/2 -translate-y-1/2 w-[70%] h-auto",children:[e.jsx("div",{className:"max-h-[80vh] overflow-auto",children:e.jsx(B,{handleCreate:n,createResidentMutation:a,setOpen:()=>d(!1)})}),e.jsx("div",{className:"absolute top-[-20px] right-[-20px]",children:e.jsx(p,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 bg-[#7F265B] rounded-full flex items-center justify-center  cursor-pointer",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#fff",d:"M16.95 8.464a1 1 0 0 0-1.414-1.414L12 10.586L8.464 7.05A1 1 0 1 0 7.05 8.464L10.586 12L7.05 15.536a1 1 0 1 0 1.414 1.414L12 13.414l3.536 3.536a1 1 0 1 0 1.414-1.414L13.414 12z"})})})})})]})]})]})}),e.jsx("div",{className:"mt-10 w-full z-0 ",children:e.jsx(D,{})})]})},G=()=>e.jsx(e.Fragment,{children:e.jsx(q,{})});export{G as Resident};
